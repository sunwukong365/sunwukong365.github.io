<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Web-Crawler</title>
      <link href="/2019/03/10/Web-Crawler/"/>
      <url>/2019/03/10/Web-Crawler/</url>
      
        <content type="html"><![CDATA[<h3 id="利用python爬虫下载-lt-lt-盗墓笔记-gt-gt"><a href="#利用python爬虫下载-lt-lt-盗墓笔记-gt-gt" class="headerlink" title="利用python爬虫下载&lt;&lt;盗墓笔记&gt;&gt;"></a>利用python爬虫下载&lt;&lt;盗墓笔记&gt;&gt;</h3><p>一个简单的网页爬虫实验.</p><p>先查看需要下载的网页基本信息, 定位要处理的问题.</p><p>比如, 需注意网页的字符编码.</p><p><img src="http://wx2.sinaimg.cn/mw690/006tNnaLgy1g0xt0o8b6cj30i20b6q3r.jpg"></p><p>还要注意正文每个段落开始都有’\u3000’的空白符.</p><p><img src="http://wx3.sinaimg.cn/mw690/006tNnaLgy1g0xt0kij1uj30h907d3yu.jpg"></p><p>每个章节最后一个段落末尾有附加信息要处理.</p><p><img src="http://wx3.sinaimg.cn/mw690/006tNnaLgy1g0xt0s49y0j30i70683yo.jpg"></p><p>python代码如下:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">import urllib.request</span><br><span class="line">import re</span><br><span class="line"></span><br><span class="line">def getContent():</span><br><span class="line">    html = urllib.request.urlopen(&quot;http://www.daomubiji.com/dao-mu-bi-ji-1&quot;).read()</span><br><span class="line">    html = html.decode(&quot;UTF-8&quot;)</span><br><span class="line">    reg = r&apos;&lt;article class=&quot;excerpt excerpt-c3&quot;&gt;&lt;a href=&quot;(.*?)&gt;(.*?)&lt;/a&gt;&lt;/article&gt;&apos;</span><br><span class="line">    reg = re.compile(reg)</span><br><span class="line">    # 获得所有章节的url以及章节名称</span><br><span class="line">    urls = re.findall(reg,html)</span><br><span class="line">    </span><br><span class="line">    for url in urls:</span><br><span class="line">        chapter_url = url[0]</span><br><span class="line">        chapter_title = url[1]</span><br><span class="line">        chapter = urllib.request.urlopen(chapter_url).read()</span><br><span class="line">        chapter = chapter.decode(&quot;UTF-8&quot;)</span><br><span class="line">        reg = r&apos;&lt;p&gt;(.*?)&lt;/p&gt;&apos;</span><br><span class="line">        reg = re.compile(reg, re.S)</span><br><span class="line">        chapter_content = re.findall(reg, chapter)</span><br><span class="line">        </span><br><span class="line">        for i in range(len(chapter_content)):</span><br><span class="line">            chapter_content[i] = chapter_content[i].replace(u&apos;\u3000&apos;, u&apos;&apos;)</span><br><span class="line">            pattern1 = re.compile(r&apos;[&lt;span style=&quot;color:#C00&quot;&gt;].*(&lt;/span&gt;)&apos;)</span><br><span class="line">            chapter_content[i] = re.sub(pattern1, &apos;&apos;, chapter_content[i])</span><br><span class="line">            pattern2 = re.compile(r&apos;&lt;a.*&apos;)</span><br><span class="line">            chapter_content[i] = re.sub(pattern2, &apos;&apos;, chapter_content[i])</span><br><span class="line">            pattern3 = re.compile(r&apos;^评论.*&apos;)</span><br><span class="line">            chapter_content[i] = re.sub(pattern3, &apos;&apos;, chapter_content[i])</span><br><span class="line">               </span><br><span class="line">        chapter_content = [item for item in chapter_content if item != &apos;&apos;]</span><br><span class="line">        </span><br><span class="line">        print(&quot;saving %s&quot; % chapter_title)</span><br><span class="line">        </span><br><span class="line">        with open(&quot;&#123;&#125;.txt&quot;.format(chapter_title),&apos;w&apos;) as f:</span><br><span class="line">            for item in chapter_content:</span><br><span class="line">                f.write(item)</span><br><span class="line">                f.write(&apos;\n&apos;)</span><br><span class="line">        </span><br><span class="line">        f.close()</span><br></pre></td></tr></table></figure><p>执行后:</p><p><img src="http://wx1.sinaimg.cn/mw690/006tNnaLgy1g0xt0vpu9mj30kk06raa3.jpg"></p>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> web-crawler </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>review_prepare</title>
      <link href="/2019/03/10/review-prepare/"/>
      <url>/2019/03/10/review-prepare/</url>
      
        <content type="html"><![CDATA[<h3 id="日常工作之评审会议tips"><a href="#日常工作之评审会议tips" class="headerlink" title="日常工作之评审会议tips"></a>日常工作之评审会议tips</h3><p>日常工作中, 有很多的评审会议要参加, 比如customer requirements review, system specification review, system architecture review, code review, test specification review等等. 如何协调评审各方, 并进行高效的评审会议, 是非常影响项目推进的. </p><p>通过观察, 我发现比较有效率的评审会议都有一个特点, 那就是会议前都有良好的准备并且会后有及时的跟进追踪. 我大致的总结了一下, 总体的流程如下.</p><ul><li>在评审会议的前3-4天, 会收到会议邀请, 会议邀请一定会包含要审议的目标文件(通常会放到sharepoint或公共盘, 每个项目成员均可访问), 另外还有一份excel文件, 项目成员review过后的所有问题都可以记录在excel文件中. </li><li>评审会议当天, 在会议上只讨论项目成员review过程中提出的问题.</li><li>会议过后, 会议发起人会有一封follow-up邮件, 总结review会议的结果, 并提出接下来的action item及完成时间.</li><li>等action item都完成后, 最后的close-up邮件会由会议发起人发给整个项目组, 告知这次就某个版本的目标文件做过review, 针对review的所需更改都已完成, 最终完成版本. 最终将目标文档和review excel文档close. 至此, 一个完整的review才算是完成了.</li></ul><p>这个大致的流程是我在项目合作当中, 看到一个工程师使用过的, 相比于明天就要开评审会了, 今天才收到会议通知, 有3-4天的准备时间, 我觉得非常的”人性化”了. 另外, 很多时候, 评审会议结束了, 通常很少收到反馈信息, 我并不清楚我在评审会议上提出的问题或者建议是否实施或者落实了. 因此, 这么一个有始有终的流程, 我觉得很实用, 借鉴之后, 觉得效果也不错, 至少对于我自己的评审项目,我整体上会有一个比较清晰的管理状态.</p>]]></content>
      
      
      <categories>
          
          <category> lessons-learned </category>
          
      </categories>
      
      
        <tags>
            
            <tag> tips </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>DB2 Client</title>
      <link href="/2019/03/10/DB2-Client-Unix/"/>
      <url>/2019/03/10/DB2-Client-Unix/</url>
      
        <content type="html"><![CDATA[<h4 id="How-to-install-DB2-client-on-Unix"><a href="#How-to-install-DB2-client-on-Unix" class="headerlink" title="How to install DB2 client on Unix"></a>How to install DB2 client on Unix</h4><p>Usually we use DB2 clients from /home/dbclient_Linux(or AIX, Solaris)/db2, but due to security concerns, IT put some restrictions to DB2 clients which would not allow us to have write access to DBCLIENT directory, it means, if you want to use DB2 clients on Unix, you need to ask IT to add the node and database for you.</p><p>If you do not want to involve IT for DB2 client usage, you can install your own DB2 client on your machine. The tradeoff is that you need to install for many times as the client would be installed locally, for example, if you are using box1 for a while, then you need to use another box2, you should install DB2 client on box2.</p><p>Here are steps to install DB2 client on Linux: (similar steps for AIX/Solaris, just some commands differences)</p><h5 id="step1"><a href="#step1" class="headerlink" title="step1:"></a>step1:</h5><p>login to your Linux box using root account</p><h5 id="step2"><a href="#step2" class="headerlink" title="step2:"></a>step2:</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># cd /build</span><br></pre></td></tr></table></figure><h5 id="step3"><a href="#step3" class="headerlink" title="step3:"></a>step3:</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># makedir db2_client_install_pkg</span><br></pre></td></tr></table></figure><h5 id="step4"><a href="#step4" class="headerlink" title="step4:"></a>step4:</h5><p>get installation package and put in in /build/db2_client_install_pkg (for e.g. the installation package is DB2_DSClient_V10.5_Linux_x86-64.tar.gz)</p><h5 id="step5"><a href="#step5" class="headerlink" title="step5:"></a>step5:</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># tar svzf DB2_DSClient_V10.5_Linux_x86-64.tar.gz</span><br></pre></td></tr></table></figure><h5 id="step6"><a href="#step6" class="headerlink" title="step6:"></a>step6:</h5><p>After step5, there would be a new directory: client under /build/ db2_client_install_pkg</p><p><img src="install_db2_c1.png"></p><h5 id="step7"><a href="#step7" class="headerlink" title="step7:"></a>step7:</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># cd client</span><br><span class="line"># ./db2_install</span><br></pre></td></tr></table></figure><p>it would ask you if you need to install DB2 client on the default path /opt/db2/v10.5(something similar like that), you could choose no, and specify a path, such as /build/db2v105</p><h5 id="step8"><a href="#step8" class="headerlink" title="step8:"></a>step8:</h5><p>create a new directory under /build, named db2_user, then create users and groups</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># groupadd –g 901 db2grp</span><br><span class="line"># groupadd –g 902 db2fgrp</span><br><span class="line"># groupadd –g 903 db2agrp </span><br><span class="line"># useradd –u 1044 –g db2grp –m –d /build/db2_user/db2inst1 db2inst1</span><br><span class="line"># useradd –u 1043 –g db2fgrp –m –d /build/db2_user/db2fenc1 db2fenc1</span><br><span class="line"># useradd –u 1042 –g db2agrp –m –d /build/ db2_user/dasusr1 dasusr1</span><br></pre></td></tr></table></figure><p> after finishing add groups and users, you would notice under /build, there are those new directories.</p><p><img src="install_db2_c2.png"></p><p>remember to change passwords for all the users.</p><h5 id="step9"><a href="#step9" class="headerlink" title="step9:"></a>step9:</h5><p>DB2 instance initialization.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># cd /build/db2v105/instance</span><br><span class="line"># ./db2icrt -a server -u db2inst1 db2inst1</span><br></pre></td></tr></table></figure><h5 id="step10"><a href="#step10" class="headerlink" title="step10:"></a>step10:</h5><p>after the initialization, you would notice there are more files/directories under /build/db2_user/db2inst1</p><h5 id="stpe11"><a href="#stpe11" class="headerlink" title="stpe11:"></a>stpe11:</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># cp /build/db2_user/db2inst1/sqllib/db2profile  /etc/profile.d/db2profile.sh</span><br></pre></td></tr></table></figure><h5 id="step12"><a href="#step12" class="headerlink" title="step12:"></a>step12:</h5><p>under /build/db2_user/db2inst1/sqllib, source db2profile and then to use db2.</p><p><img src="install_db2_c3.png"></p><h5 id="step13"><a href="#step13" class="headerlink" title="step13:"></a>step13:</h5><p>now you can use db2 command to catalog your node and database, and then connect to your own DB2 database.</p>]]></content>
      
      
      <categories>
          
          <category> database </category>
          
      </categories>
      
      
        <tags>
            
            <tag> DB2 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>DB2 issues</title>
      <link href="/2019/03/06/DB2-issues/"/>
      <url>/2019/03/06/DB2-issues/</url>
      
        <content type="html"><![CDATA[<h5 id="How-to-manage-DB2-server-spaces"><a href="#How-to-manage-DB2-server-spaces" class="headerlink" title="How to manage DB2 server spaces?"></a>How to manage DB2 server spaces?</h5><p>After you use db2 database for a while, there are db2diag,log and transaction logs generated, which<br>would consume spaces of your server machine. Below steps gives you a way to clean up those logs  to free up some spaces.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">db2 =&gt; set database LOGARCHMETH1 =  logretain</span><br><span class="line">db2 =&gt; get db cfg</span><br></pre></td></tr></table></figure><p>you would see:</p><p><img src="db2_1.png"></p><p>check “Path to log files” and “First active log file” items in the configure list, then issue a prune logfile command.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db2 =&gt; prune logfile prior to S0000681.LOG</span><br></pre></td></tr></table></figure><p>you would notice that in C:\DB2\NODE0000\SQL00002\LOGSTREAM0000, all the log files prior to S0000681 would be deleted.</p><p>then we also need to manage db2diag.log. For windows, db2diaglog may locate in C:\Users\All\Users\IBM\DB2\DB2COPY1\DB2\DIAG0000 or C:\ProgramData\IBM\DB2\DB2COPY1\DB2\DIAG0000</p><p>for Unix, it may locate in /db2inst1/sqllib/db2dump</p><p>first make sure DB2 is stopped, if not, issue “db2 stop force” command to make it stop. then delete db2diag.log file or backup it to another place, then restart DB2 using “db2start” .</p><h5 id="how-to-handle-DB2-log-full-issue"><a href="#how-to-handle-DB2-log-full-issue" class="headerlink" title="how to handle DB2 log full issue?"></a>how to handle DB2 log full issue?</h5><p>[^note]: do not use delete from table to delete a large table, in db2_bulkload_api testing unit, there is a job to load 200 million row into a DB2 table, using delete from table command would easily cause log file full. Try to load a null file to the table or use drop table then re-create method to empty the table.</p><p>you may have similar error message for log full:</p><p>SQL0964C The transaction log for the database is full. </p><p>so you need to enlarge the log file size using below commands.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">db2 =&gt; update db cfg using LOGFILSIZ 7900</span><br><span class="line">db2 =&gt; update db cfg using LOGPRIMARY 30</span><br><span class="line">db2 =&gt; update db cfg using LOGSECOND 20</span><br><span class="line">db2 =&gt; db2stop (or db2stop force)  # need to shutdown to make teh update take effect</span><br><span class="line">db2 =&gt; db2start</span><br></pre></td></tr></table></figure><h5 id="how-to-truncate-a-table-or-move-data-from-a-table"><a href="#how-to-truncate-a-table-or-move-data-from-a-table" class="headerlink" title="how to truncate a table or move data from a table?"></a>how to truncate a table or move data from a table?</h5><p>in DB2, there is no truncate command, we can use other commands to fulfill this function.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">on widowns: </span><br><span class="line">db2 =&gt; import from c:\empty.txt of del replace into &quot;table_name&quot;;</span><br><span class="line">on unix:</span><br><span class="line">import from /dev/null of del replace into &quot;table_name&quot;</span><br></pre></td></tr></table></figure><h5 id="how-to-check-DB2-connections-when-there-are-too-many-connections-existed"><a href="#how-to-check-DB2-connections-when-there-are-too-many-connections-existed" class="headerlink" title="how to check DB2 connections when there are too many connections existed?"></a>how to check DB2 connections when there are too many connections existed?</h5><p>sometimes you would encounter SQL1035N error when you try to connect or perform an action to a database.</p><p>SQL1035N  The database is currently in use.</p><p>First to check all the current opened user connections, then to shut down them all.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">db2 =&gt; db2 list applications show detail</span><br><span class="line">db2 =&gt; db2 force application all</span><br></pre></td></tr></table></figure><h5 id="connecting-to-a-database-is-not-permitted-within-a-logical-unit-of-work-when-the-connect-type-1-setting-is-in-use"><a href="#connecting-to-a-database-is-not-permitted-within-a-logical-unit-of-work-when-the-connect-type-1-setting-is-in-use" class="headerlink" title="connecting to a database is not permitted within a logical unit of work when the connect type 1 setting is in use."></a>connecting to a database is not permitted within a logical unit of work when the connect type 1 setting is in use.</h5><p>use terminate to solve this issue.</p><p><img src="db2_2.png"></p><h5 id="how-to-handle-DB2-table-is-in-load-pending-state-issue"><a href="#how-to-handle-DB2-table-is-in-load-pending-state-issue" class="headerlink" title="how to handle DB2 table is in load pending state issue?"></a>how to handle DB2 table is in load pending state issue?</h5><p>Use “load empty file…terminate into …” method, this issue happens when loading large amount of data into a table.</p><p><img src="db2_3.png"></p><p><img src="db2_4.pgn"></p><h5 id="how-to-handle-table-space-access-not-allowed-issue"><a href="#how-to-handle-table-space-access-not-allowed-issue" class="headerlink" title="how to handle table space access not allowed issue?"></a>how to handle table space access not allowed issue?</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db2 =&gt; db2 list tablespaces show detail</span><br></pre></td></tr></table></figure><p>you would see :</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Tablespace ID  = 2   </span><br><span class="line">Name  = USERSPACE1   </span><br><span class="line">Type  = System managed space  </span><br><span class="line">Contents  = Any data   </span><br><span class="line">State  = 0x0020   </span><br><span class="line">Detailed explanation:   Backup pending</span><br></pre></td></tr></table></figure><p>if you encounter table space access not allowed issue, you need to check your tablespaces status, usually you would find that at least one of your tablespace would have state=0x0020, this state indicates that this tablespace is in abnormal state. What you need to do is to back up the database to bring tablespace back to normal.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db2 =&gt; db2 backup db</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> database </category>
          
      </categories>
      
      
        <tags>
            
            <tag> DB2 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>DB2</title>
      <link href="/2019/03/05/How%20to%20install%20DB2%20server%20on%20Linux/"/>
      <url>/2019/03/05/How%20to%20install%20DB2%20server%20on%20Linux/</url>
      
        <content type="html"><![CDATA[<h3 id="How-to-install-DB2-server-on-Linux"><a href="#How-to-install-DB2-server-on-Linux" class="headerlink" title="How to install DB2 server on Linux"></a>How to install DB2 server on Linux</h3><h5 id="step1"><a href="#step1" class="headerlink" title="step1:"></a>step1:</h5><p>login to linux with root account, add groups and users for DB2.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># groupadd -g 901 db2grp</span><br><span class="line"># groupadd -g 902 db2fgrp</span><br><span class="line"># groupadd -g 903 db2agrp</span><br><span class="line"># useradd -u 1044 -g db2grp -m -d /build/db2inst1 db2inst1</span><br><span class="line"># useradd -u 1043 -g db2fgrp -m -d /build/db2fenc1 db2fenc1</span><br><span class="line"># useradd -u 1042 -g db2agrp -m -d /build/dasusr1 dasusr1</span><br></pre></td></tr></table></figure><p>check from /build to see if all these db2inst1, db2fenc1 and dasusr1 folders are created there. (/build here is my example directory, you can change the directory to suit you own case.)</p><h5 id="step2"><a href="#step2" class="headerlink" title="step2:"></a>step2:</h5><p>change password for the created users.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># passwd db2inst1</span><br></pre></td></tr></table></figure><p>change passwords for db2fenc1 and db2susr1 too.</p><p>then check to see if all groups and users are created successfully.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># more /etc/group |grep db2</span><br><span class="line"># more /etc/passwd |grep db2</span><br></pre></td></tr></table></figure><h5 id="step3"><a href="#step3" class="headerlink" title="step3:"></a>step3:</h5><p>copy installation package to the directory and unzip it. (here I use /build as an example.)</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># tar -svf DB2_Svr_AdvancedEnterpriseEdition_V10.5_Linux_x86-64.tar.gz</span><br></pre></td></tr></table></figure><p>after unzip, you would find the newly created server directory in /build. </p><p><img src="/assets/install_db2_s1.png" alt="install_db2_s1"></p><h5 id="step4"><a href="#step4" class="headerlink" title="step4:"></a>step4:</h5><p>start the install process.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># cd /build/server</span><br><span class="line"># ./db2_install</span><br></pre></td></tr></table></figure><p>DB2 products would be installed in /opt/ibm/db2/V10.5 by default.</p><h5 id="step5"><a href="#step5" class="headerlink" title="step5:"></a>step5:</h5><p>create db2 instance.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># cd /opt/ibm/db2/V10.5/instance</span><br><span class="line"># ./dascrt -u dasusr1</span><br><span class="line"># ./db2icrt -a server -p 55555 -s ese -u db2inst1 db2inst1</span><br></pre></td></tr></table></figure><p>switch to db2inst1 to see the current instance.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># su -db2inst1</span><br><span class="line">$ db2 get instance</span><br></pre></td></tr></table></figure><h5 id="step6"><a href="#step6" class="headerlink" title="step6:"></a>step6:</h5><p>configurations.(use db2inst1 account.)</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ db2 get dbm cfg | grep SVC</span><br></pre></td></tr></table></figure><p>you would see:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">TCP/IP Service name (SVCENAME)=55555</span><br><span class="line">SSL service name (SSL_SVCENAME)=</span><br></pre></td></tr></table></figure><p>Make SVCENAME to a specific name.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ db2 update dbm cfg using SVCENAME db2c_db2inst1</span><br></pre></td></tr></table></figure><h5 id="step7"><a href="#step7" class="headerlink" title="step7:"></a>step7:</h5><p>modify service file. (use root account.)</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># vi /etc/series</span><br></pre></td></tr></table></figure><p>you would see: db2c_db2inst1 55555/tcp</p><p>then set db2comm to tcpip.(use db2inst1 account.)</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># su -db2inst1</span><br><span class="line">$ db2set DB2COMM=tcpip</span><br></pre></td></tr></table></figure><h5 id="step8"><a href="#step8" class="headerlink" title="step8:"></a>step8:</h5><p>restart DB2.(use db2das and db2inst1 accounts.)</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ su - dasusr1</span><br><span class="line">$ db2admin stop</span><br><span class="line">$ db2admin start</span><br><span class="line">$ su -db2inst1</span><br><span class="line">$ db2stop</span><br><span class="line">$ db2start</span><br></pre></td></tr></table></figure><h5 id="step9"><a href="#step9" class="headerlink" title="step9:"></a>step9:</h5><p>check if listening service is on.(use root account.)</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># netstat -a |grep db2c_db2inst1</span><br></pre></td></tr></table></figure><p>you would see:  </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tcp 0  0 *.db2c_db2inst1  *:*  LISTEN</span><br></pre></td></tr></table></figure><h5 id="step10"><a href="#step10" class="headerlink" title="step10:"></a>step10:</h5><p>configure DB2 to auto start.(use root account.)</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># cd /opt/ibm/db2/V10.5/instance</span><br><span class="line"># ./db2iauto -on db2inst1</span><br></pre></td></tr></table></figure><h5 id="step11"><a href="#step11" class="headerlink" title="step11:"></a>step11:</h5><p>create a database for testing connection.</p><p>db2 =&gt; create database <font color="#FF0000">kx</font> automatic storage yes on /build/<font color="#FF0000">db2_k</font> dbpath on /build/<font color="#FF0000">db2_k</font> using codeset UTF-8 territory CN collate using system pagesize </p><p>[^]: the red highlighted parts are just examples, you can modify to suit your own case.</p><h5 id="Testing-part-on-client"><a href="#Testing-part-on-client" class="headerlink" title="Testing part on client:"></a>Testing part on client:</h5><p>catalog tcp/ip and database on DB2 client side.</p><p>db2 =&gt; catalog tcpip node <font color="#FF0000">n1</font> remote <font color="#FF0000">10.162.198.102</font> server 55555</p><p>db2 =&gt; db2 terminate  (using this command to make the node directory modification to take effect)</p><p>db2 =&gt; catalog database <font color="#FF0000">kx</font> at node <font color="#FF0000">n1</font></p><p>db2 =&gt; db2 terminate</p><p>db2 =&gt; connect to &lt;<font color="#FF0000">kx</font> user db2inst1 using <font color="#FF0000">pass123</font></p><p>[^]: the red highlighted parts are just examples, you need to modify them to use your own data.</p>]]></content>
      
      
      <categories>
          
          <category> database </category>
          
      </categories>
      
      
        <tags>
            
            <tag> DB2 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
